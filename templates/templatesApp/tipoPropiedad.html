{% extends 'templatesApp/base-admin.html' %}
{% load static %}

{% block title %}Tipos de Propiedades{% endblock %}

{% block content %}
<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow-sm p-4">
        <h2 class="mb-4 text-center">Gestionar Tipos de Propiedades</h2>

        <!-- formulario para agregar nuevo tipo -->
        <form id="formTipo">
          {% csrf_token %}
          <div class="input-group mb-3">
            <input type="text" class="form-control" name="nombre_tipo" placeholder="Nuevo tipo de propiedad" required>
            <button class="btn btn-primary" type="submit">Agregar</button>
          </div>
        </form>

        <div id="mensajeTipo" class="mb-3"></div>

        <!-- tabla de tipos existentes -->
        <table class="table table-hover mt-4">
          <thead class="table-light">
            <tr>
              <th>Tipo</th>
              <th class="text-end">Acciones</th>
            </tr>
          </thead>
          <tbody id="tablaTipos">
            <tr id="noTipos">
              <td colspan="2" class="text-center">No hay tipos registrados.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<script>
  const formTipo = document.getElementById('formTipo');
  const mensajeTipo = document.getElementById('mensajeTipo');
  const tablaTipos = document.getElementById('tablaTipos');
  const filaNoTipos = document.getElementById('noTipos');

  formTipo.addEventListener('submit', function(e){
    e.preventDefault(); // evita el reenv√≠o
    const nombre = this.nombre_tipo.value.trim();
    if(nombre){
      if(filaNoTipos) filaNoTipos.remove(); // quita mensaje de no hay tipos
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${nombre}</td>
        <td class="text-end">
          <button class="btn btn-sm btn-outline-secondary me-2">Editar</button>
          <button class="btn btn-sm btn-outline-danger">Eliminar</button>
        </td>
      `;
      tablaTipos.appendChild(tr);
      mensajeTipo.innerHTML = `<span class="text-success">Tipo "${nombre}" agregado correctamente.</span>`;
      this.reset();
    }
});

</script>
{% endblock %}
